<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å‰ªåˆ‡æ¿é“¾æ¥æå–å·¥å…·</title>
  <style>
    body {
     font-family: Arial, sans-serif;
      margin: 20px;
      padding: 0;
      background-color: #f9f9f9;
      color: #333;
      /*text-align: center;  å…¨å±€å±…ä¸­ */
    }
	 .donation-container {
      margin: 20px auto; /* è®¾ç½®å®¹å™¨å±…ä¸­ */
      text-align: center; /* å®¹å™¨å†…éƒ¨å†…å®¹å±…ä¸­ */
    }
    .donation-text {
      font-size: 18px;
      font-weight: bold;
      color: #007BFF;
      margin-bottom: 15px; /* æç¤ºæ–‡å­—ä¸å›¾ç‰‡ä¹‹é—´çš„é—´è· */
    }
    .donation-images {
      display: flex;
      justify-content: center;
      gap: 20px; /* å›¾ç‰‡ä¹‹é—´çš„é—´è· */
    }
    .donation-images img {
      width: 200px;
      height: 200px;
      object-fit: cover; /* ä¿æŒå›¾ç‰‡æ¯”ä¾‹ */
      border-radius: 10px; /* åœ†è§’æ•ˆæœ */
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* é˜´å½±æ•ˆæœ */
      transition: transform 0.3s ease, box-shadow 0.3s ease; /* åŠ¨æ•ˆ */
    }
    .donation-images img:hover {
      transform: scale(1.05); /* é¼ æ ‡æ‚¬åœæ”¾å¤§æ•ˆæœ */
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3); /* é¼ æ ‡æ‚¬åœæ—¶é˜´å½±åŠ æ·± */
    }
    button {
      padding: 10px 15px;
      margin: 5px 5px 5px 0;
      font-size: 14px;
      border: none;
      background-color: #007BFF;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }
    .link-container {
      margin-top: 20px;
    }
    .link-item {
      margin-bottom: 10px;
      display: flex;
      align-items: left;
    }
    .link-item span {
      margin-right: 10px;
      word-break: break-word;
      flex-grow: 1;
    }
    .group {
      margin-bottom: 20px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      background-color: #fff;
    }
    .group h3 {
      margin: 0 0 10px 0;
      font-size: 18px;
    }
    /* å¼¹çª—æ ·å¼ */
    .toast {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #333;
      color: white;
      padding: 10px 20px;
      border-radius: 5px;
      font-size: 14px;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s, visibility 0.3s;
      z-index: 1000;
    }
    .toast.show {
      opacity: 1;
      visibility: visible;
    }
  </style>
</head>
<body>
<div class="donation-container">
    <p class="donation-text">å–œæ¬¢å°±è¯·æˆ‘å–å¯ä¹å§ğŸ»</p>
    <div class="donation-images">
      <img src="https://github.com/fishenjoy/fishenjoy.github.io/blob/master/img/wechat.jpg?raw=true" alt="è¯·æˆ‘å–å¯ä¹ - å¾®ä¿¡">
      <img src="https://github.com/fishenjoy/fishenjoy.github.io/blob/master/img/zhifubao.jpg?raw=true" alt="è¯·æˆ‘å–å¯ä¹ - æ”¯ä»˜å®">
    </div>
	  </div>
   <h1>å‰ªåˆ‡æ¿é“¾æ¥æå–å·¥å…·</h1>
  <p>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æˆ–ç›´æ¥æ‰“å¼€é¡µé¢ï¼Œæˆ‘ä»¬ä¼šä»æ‚¨çš„å‰ªåˆ‡æ¿ä¸­æå–æ‰€æœ‰ä»¥ <code>http</code> å¼€å¤´çš„é“¾æ¥ã€‚</p>
  <button id="fetchLinksButton">ä»å‰ªåˆ‡æ¿æå–é“¾æ¥</button>
  <button id="copyAllLinksButton">ä¸€é”®å¤åˆ¶æ‰€æœ‰é“¾æ¥</button>
  <button id="deleteAllLinksButton">ä¸€é”®åˆ é™¤æ‰€æœ‰é“¾æ¥</button>

  <div class="link-container" id="linkContainer"></div>

  <!-- å…¨å±€å¼¹çª— -->
  <div id="toast" class="toast"></div>

  <script>
    let groupCount = 0; // è®°å½•åˆ†ç»„æ¬¡æ•°
    const displayedLinks = new Set(); // å­˜å‚¨å·²æ˜¾ç¤ºçš„é“¾æ¥ï¼ˆå…¨å±€å»é‡ï¼‰

    // æ˜¾ç¤ºå¼¹çª—æç¤º
    function showToast(message) {
      const toast = document.getElementById("toast");
      toast.textContent = message; // è®¾ç½®æç¤ºå†…å®¹
      toast.classList.add("show"); // æ˜¾ç¤ºå¼¹çª—
      setTimeout(() => {
        toast.classList.remove("show"); // 1.5ç§’åéšè—å¼¹çª—
      }, 1500);
    }

    // æå–å‰ªåˆ‡æ¿ä¸­çš„å†…å®¹
    async function readClipboardAndExtractLinks() {
      try {
        const text = await navigator.clipboard.readText(); // è¯»å–å‰ªåˆ‡æ¿å†…å®¹
        const newLinks = extractHttpLinks(text); // æå–æ‰€æœ‰ http å¼€å¤´çš„é“¾æ¥å¹¶å»é‡

        if (newLinks.length > 0) {
          groupCount++; // å¢åŠ åˆ†ç»„è®¡æ•°
          displayLinks(newLinks, groupCount); // æ˜¾ç¤ºæ–°é“¾æ¥
          showToast(`æˆåŠŸæ·»åŠ  ${newLinks.length} ä¸ªæ–°é“¾æ¥ï¼`);
        } else {
          showToast("å‰ªåˆ‡æ¿ä¸­æœªæ‰¾åˆ°ä»»ä½•æ–°é“¾æ¥ï¼");
        }
      } catch (err) {
        console.error("æ— æ³•è¯»å–å‰ªåˆ‡æ¿å†…å®¹: ", err);
        showToast("æ— æ³•è¯»å–å‰ªåˆ‡æ¿å†…å®¹ï¼Œè¯·ç¡®ä¿æ‚¨æˆäºˆäº†æƒé™ã€‚");
      }
    }

    // ä»æ–‡æœ¬ä¸­æå–æ‰€æœ‰ç¬¦åˆè§„åˆ™çš„ http é“¾æ¥ï¼Œå¹¶å»é‡
    function extractHttpLinks(text) {
      const regex = /https?:\/\/[^\s]+/g; // åŒ¹é… http æˆ– https å¼€å¤´çš„é“¾æ¥
      const links = text.match(regex) || []; // è¿”å›åŒ¹é…çš„é“¾æ¥åˆ—è¡¨

    const uniqueLinks = Array.from(new Set(
      links.map(link => link.split(')')[0]) // ä¿ç•™æ‹¬å·ä¹‹å‰çš„å†…å®¹
    ));

      // å…¨å±€å»é‡ï¼šè¿‡æ»¤æ‰å·²ç»æ˜¾ç¤ºçš„é“¾æ¥
      return uniqueLinks.filter(link =>
        !displayedLinks.has(link) && // å…¨å±€å»é‡
        !link.startsWith("https://github.com") &&
        !link.startsWith("https://apps.apple") &&
        !link.startsWith("http://github.com") &&
        !link.startsWith("https://play.google.com") &&
        !link.startsWith("https://t.me/")&&
        !link.startsWith("http://wukong.bar")&&
        !link.startsWith("http://web7.vip")
      ).map(link => {
        displayedLinks.add(link); // æ·»åŠ åˆ°å…¨å±€å»é‡é›†åˆ
        return link;
      });
    }

    // åœ¨ç½‘é¡µä¸Šæ˜¾ç¤ºé“¾æ¥ï¼ŒæŒ‰åˆ†ç»„æ˜¾ç¤º
    function displayLinks(links, groupNumber) {
      const container = document.getElementById("linkContainer");
      const group = document.createElement("div"); // åˆ›å»ºæ–°çš„åˆ†ç»„å®¹å™¨
      group.className = "group";

      // æ·»åŠ åˆ†ç»„æ ‡é¢˜
      const groupTitle = document.createElement("h3");
      groupTitle.textContent = `ç¬¬ ${groupNumber} æ¬¡æ·»åŠ çš„é“¾æ¥ï¼š`;
      group.appendChild(groupTitle);

      links.forEach((link) => {
        const linkItem = document.createElement("div");
        linkItem.className = "link-item";

        const linkText = document.createElement("span");
        linkText.textContent = link;

        const copyButton = document.createElement("button");
        copyButton.textContent = "å¤åˆ¶é“¾æ¥";
        copyButton.addEventListener("click", () => {
          copyToClipboard(link);
          showToast("é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ï¼");
        });

        const deleteButton = document.createElement("button");
        deleteButton.textContent = "åˆ é™¤";
        deleteButton.addEventListener("click", () => {
          linkItem.remove();
          displayedLinks.delete(link); // åŒæ—¶ä»å·²æ˜¾ç¤ºé“¾æ¥ä¸­ç§»é™¤
        });

        linkItem.appendChild(linkText);
        linkItem.appendChild(copyButton);
        linkItem.appendChild(deleteButton);
        group.appendChild(linkItem);
      });

      container.appendChild(group); // å°†åˆ†ç»„æ·»åŠ åˆ°å®¹å™¨ä¸­
    }

    // å°†é“¾æ¥å¤åˆ¶åˆ°å‰ªåˆ‡æ¿
    function copyToClipboard(text) {
      navigator.clipboard.writeText(text).then(() => {
        showToast("é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ï¼");
      }).catch((err) => {
        console.error("å¤åˆ¶åˆ°å‰ªåˆ‡æ¿å¤±è´¥: ", err);
        showToast("å¤åˆ¶å¤±è´¥ï¼Œè¯·é‡è¯•ã€‚");
      });
    }

    // ä¸€é”®å¤åˆ¶æ‰€æœ‰é“¾æ¥
    function copyAllLinks() {
      const links = Array.from(document.querySelectorAll(".link-item span")) // è·å–æ‰€æœ‰æ˜¾ç¤ºçš„é“¾æ¥
        .map(linkElement => linkElement.textContent); // æå–é“¾æ¥æ–‡æœ¬

      if (links.length === 0) {
        showToast("å½“å‰é¡µé¢æ²¡æœ‰é“¾æ¥å¯å¤åˆ¶ï¼");
        return;
      }

      const allLinksText = links.join("\n"); // å°†æ‰€æœ‰é“¾æ¥æ‹¼æ¥ä¸ºæ¢è¡Œåˆ†éš”çš„æ–‡æœ¬

      navigator.clipboard.writeText(allLinksText).then(() => {
        showToast("å·²å¤åˆ¶æ‰€æœ‰é“¾æ¥åˆ°å‰ªåˆ‡æ¿ï¼");
      }).catch((err) => {
        console.error("å¤åˆ¶æ‰€æœ‰é“¾æ¥å¤±è´¥: ", err);
        showToast("å¤åˆ¶å¤±è´¥ï¼Œè¯·é‡è¯•ã€‚");
      });
    }

  function deleteAllLinks() {
    if (confirm("æ‚¨ç¡®å®šè¦åˆ é™¤æ‰€æœ‰é“¾æ¥å—ï¼Ÿ")) {
      const container = document.getElementById("linkContainer");
      container.innerHTML = ""; // æ¸…ç©ºå®¹å™¨å†…å®¹
      displayedLinks.clear(); // æ¸…ç©ºå·²æ˜¾ç¤ºé“¾æ¥
      showToast("å·²åˆ é™¤æ‰€æœ‰é“¾æ¥ï¼");
    }
  }

    // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨è¯»å–å‰ªåˆ‡æ¿
    window.addEventListener("load", readClipboardAndExtractLinks);

    // æŒ‰é’®ç‚¹å‡»äº‹ä»¶
    document.getElementById("fetchLinksButton").addEventListener("click", readClipboardAndExtractLinks);
    document.getElementById("copyAllLinksButton").addEventListener("click", copyAllLinks);
    document.getElementById("deleteAllLinksButton").addEventListener("click", deleteAllLinks);
  </script>
</body>
</html>